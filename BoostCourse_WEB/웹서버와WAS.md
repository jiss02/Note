# 웹서버와 WAS

## 웹 서버

보통 SW를 의미하지만 웹 서버 소프트웨어가 동작하는 컴퓨터를 말하는 경우도 있다.

클라이언트(브라우저)가 요청하는 `각종 리소스를 전달하는 것`이 웹서버가 해야할 일이다. 클라이언트나 크롤러는 **http 요청에 맞게** 리소스를 요청하고, 웹 서버는 요청한 리소스를 반환하게 된다.

> 리소스가 존재하지 않거나 전송 중 문제가 생기는 경우 에러를 발생시킨다!

### 정적

---

html, css, js, img와 같이 컴퓨터에 저장된 파일들을 의미한다.

### 동적

---

웹 서버에 의해서 실행되는 프로그램을 통해 만들어진 결과물이다.

### HTTP

---

`인터넷으로 데이터를 주고받기 위한 프로토콜`이다. 

> 프로토콜 == 규약

미리 정해 놓은 규칙을 의미하며, 해당 규칙을 지키면서 클라이언크와 서버는 통신을 하게 된다.

> 클라이언트와 웹 서버는 `HTTP`를 통해서 통신한다.

우리가 url주소를 사용할 때, http로 시작하는 이유는 http를 사용한다는 것을 의미한다.

#### 순서대로 생각해보자!

1. www.example.com 이라는 웹서버에 접속한다.
2. 서버는 응답으로 HTML 문서를 전송하고 브라우저가 이를 띄운다.
3. css나 js 같은 자원의 url을 추출하여 여러개를 동시에 서버에 요청한다.
4. 서버가 여러개의 요청에 대한 응답을 브라우저로 전송한다.
5. 브라우저는 이를 합쳐서 사용자에게 보여준다.

> 하나로 합쳐서 보여주는 작업이 `렌더링`이다.

### 웹 서버 소프트웨어 종류

---

- Nginx
  - 오픈소스
  - 차세대 웹 서버
  - 더 적은 자원으로 더 빠르게 데이터 서비하는 것을 목적
- Microsoft
- Apache
  - 오픈소스
  - 대부분의 운영체제에서 가능



## WAS

### 용어부터 보고가자

---

#### 서버

서비스를 제공한다.

#### 클라이언트

서버에게 서비스를 요청해서 결과를 보여주는 것이다.

> 웹 서버와 웹 브라우저가 적절한 예라고 생각하면 되겠다.

#### DBMS

데이터베이스에 대한 관리를 해주는 SW이다! DBMS가 DB를 관리해주니 개발자들은 데이터를 더 쉽게 관리할 수 있게 되었다.

Oracle에서 처음 구현하였다. Mysql, MariaDB, Oracle, PostgreSQL 등이 있다.

`서버형태로 서비스가 제공`되기 때문에 DBMS에 접속하는 클라이언트 프로그램이 많았었다. 그러나 클라이언트의 로직이 방대해지고 프로그램 자체의 크기가 커지는 문제와, 로직 변경시 클라이언트가 매번 배포되어야한다는 문제점이 존재했다. 거기에 로직이 클라이언트에 포함된다는 것은 보안적으로 취약하다는 의미이기도했다!

이를 위해 등장한것이...

#### 미들웨어

DBMS에 직접 클라이언트를 연결하여 사용하는 것이 아니라, `클라이언트와 DBMS 사이에 다른 서버(미들웨어)`를 하나 더 두는 것이다!

클라이언트는 요청을 중앙서버에게 보내고, 중앙 서버에서 로직을 수행한다. 데이터의 조작이 필요한 경우 DBMS에게 부탁한다!

클라이언트는 로직 없이 사용자로부터의 입력을 전송하고 응답을 보여주기만 하면 되기때문에 크기도 작아지고 편리해진다! 로직이 수정되어도 미들웨어만 변경되면 된다.

### WAS

---

최초의 웹 등장시, **웹 브라우저는 정적인 데이터**만 보여주었다. 

그러나 사용자가 많아지고 다양한 요구가 생겨나면서 **동적인 기능**까지 요구하게 되었다!

> 데이터를 입력하고 조회하는 등의 활동을 이야기한다.

동적인 기능을 넣기 위해서는 `프로그래밍 기능`이 들어가야했고, 이 방식을 **CGI**라고 부른다. 단순 프로그래밍에서는 큰 문제가 없었으나, 점점 복잡해 지면서 복잡한 프로그래밍 기능들이 필요하게 되었다.

> DBMS와 연관된 경우가 많았다.

브라우저와 DBMS 사이에서 동작하는 미들웨어가 필요하게 되었는데, 이게바로  **WAS**다!

### WAS가 가지는 3가지 기능

---

1. 프로그램 실행 환경과 DB 접속 기능 제공
2. 여러 트랜잭션 관리
3. 업무를 처하는 비지니스 로직을 수행



## 웹서버 VS WAS

웹서버: 정적인 컨텐츠를 브라우저에게 전송, WAS보다 간단하게 구성됨

WAS: 동적인 결과를 웹브라우저에게 전송

- WAS도 자체적으로 웹서버 기능을 탑재하고 있음
- WAS가 가진 웹 서버도 정적 컨텐츠를 처리하는데 큰 차이가 없음
- 규모가 커질 수록 웹서버와 WAS를 분리함
  - 대용량 웹 애플리케이션의 경우 무중단 운영을 하기위해 사용함
  - failover 때문이다!