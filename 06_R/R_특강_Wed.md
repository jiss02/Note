# R 특강

# WED
***

## 소개

### 데이터 전처리

나에게 필요한 형태로 데이터를 가공하는 것. 주어지는 데이터에는 많은 오류들이 있는데 이를 정제할 필요가 있다.

### R

+ 시각화 기능이 다른 툴보다 잘 되어있음. 
+ 최신 분석 기법의 빠른 반영, 비정형 데이터 분석 용이, 다양한 통계분석 기법을 가진다.
+ 데이터 분석용. 분석 자체에 사용하는 경우가 많다.

> Python의 경우 딥러닝에 특화. 소프트웨어 개발용 언어. 개발 + 분석활용. 소프트웨어 개발 시 주로 사용한다. 
>> 라이브러리와 패키지 사용이 용이함. 

### 크롤링

HTML, JavaScript 등의 TAG 분석 -> 필요한 정보(댓글 등)를 긁어냄.

> + 형태소 분석과 같이 쓸모없는 거 버리고 핵심 추출. 의미있는 정도로 구문을 나누는 것. <br>
> + Ex. co.matrix -> 같이 나타나는 단어를 행렬 형태로 표현. (같이 나타나면 + 1)

## R 시작

+ ctrl + enter : 커서가 있는 행 실행.

> 여러줄 실행하고 싶으면 블럭을 잡고 ctrl + enter 하면 된다.

+ connection : DB와 연동.
+ file : working 디렉토리를 보여준다.
+ plots : 그래프.
+ Packages : 설치된 패키지 목록.

### 환경설정
+ soft-wrap : 줄바꿈
+ code editing : 한글 깨지면 UTF-8로 

### 코드

+ dim : 행과 열의 크기
+ str : 데이터의 구조를 설명해준다. 어떤 속성들이, 변수들이 들어있는지 요약하여 보여줌.
+ summary : 요약통계량을 구해준다.
+ View : table로 보여준다. 오름차순 내림차순과 같은 간단한 기능을 가진다.

### 자동차 예제

+ arrange(desc(mean.hwy)) : 정렬 -> 내림차순(desc)
+ Estimate : 기울기 (1씩 증가할 때 배기량이 어떻게 변하는가?)
+ Pr(>|t|) : 유의확률

### 회귀분석

서로 어떤 영향을 미치는지 확인

### 기초지식 (+코드분석)

+ ggplot2 : 시각화 패키지 (mpg 데이터 들어있음)

> qplot, geom._line()..

#### 변수

+ $ : 특정 변수 지칭 (ex.mpg$hwy)
+ "=" == "<-" R에서는 화살표 기호 사용.
	+ 화살표 사용을 권고한다. 변수를 만들때는 화살표를 쓰고 그 이외에는 "=" 사용.
	+ 단축키는 Alt + -
+ c : 연속값 변수 (Ex.c(1:5))
+ seq : 연속값 변수 Ex.seq(1,10,by=2) // 1부터 10까지 2씩 증가.
+ 상수를 더해주면 각각의 원소에 대해 더해준다.
+ font가 이상하게 나오면 Alt + "+"를 누르면된다.

#### 함수

paste : 문장 합치기 <br>
> collapse 문장 사이 무엇으로 구분할지 <br>

qplot : 빈도수 세기 <br>
> (파라미터: geom(그래프모양결정), x축, y축, data, color(x축에 따라 다른 색 부여)

#### 패키지

+ 하나의 함수꾸러미. 설치 후에 킬때 마다 Library 로드해야함. 
+ CRAN 서버에서 다운 받아온다.

#### ? 기능

?ftn_name : 메뉴얼을 알려준다.
> 어느 패키지 안에 있는지, 함수의 이름, 파라미터 등을 설명

+ ggplot2 cheat sheet : 좀 더 보기 쉬운 메뉴얼. 구글링! 함수어떻게 쓸지 모르겠을 때.

## 데이터 구조

### data frame

+ row(case)와 column.
+ column이 많으면 분석할 것이 많아진다.
	+ 더 좋은 수준의 알고리즘을 고안해야함. 고급 분석방법. (machine learning)
	+ row가 많으면 고사양 장비 구축.
+ data.frame 함수로 변수를 합쳐 형태를 만들 수 있다.

### 데이터 가져오기

+ install.packages("readxl") : 엑셀로 부터 읽어 올 경우.
> 프로젝트 폴더 안에 데이터 파일이 존재해야한다.

+ read_excel (파일이름, sheet(불러올 sheet), col_names(첫 행에 변수명이 들어있을때 T 아니면 F))
+ csv : 값들 사이사이를 ","로 구분해놓은 data
	+ read.csv로 부른다. 
	+ write.csv (data frame 이름, file = "이름") -> data frame을 csv로 저장한다.
+ R로 만들어낸 데이터 프레임에 저장한 걸 활용하는 것이다.

## 코드 보충

+ head : 앞에서 부터 6개 행. n의 숫자를 넣어주면 n개를 보여준다
+ tail : 뒤에서 부터 6개 행.
+ dim : 데이터의 차원을 알려준다. 크기.
+ str : 행이 몇개고, 변수가 몇개인지 data frame(구조)알려준다. 속성 파악하기.
+ obs : 관측치
+ mpg <- as.data.frame(ggplot2::mpg) : as(변환시켜줘) ggplot2에있는 mpg를 data frame으로 변환해서 저장해라.

## 데이터 가공하기 (dplyr)

+ 복사본을 만들어 놓는 것이 좋다. 원재료를 날릴 수도 있으니까!
+ 이름 새로 짓기

> dfnew <- rename(dfnew, v2 = var2, ...)

### 새로운 변수 추가하기 (파생변수)

+ df$변수명 <- df$변수 + df$변수
+ ifelse(조건,T,F)
+ table : 빈도표 생성
+ qplot : 빈도 그래프 (범주)
+ hist : 연속값의 분포