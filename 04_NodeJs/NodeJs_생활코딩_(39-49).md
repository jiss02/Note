# Node.js 39 - 49

## 객체와 배열

모두 정보를 정리정돈 하기 위한 수납상자 같은 개념. 연관된 데이터를 담는 그릇

- 객체: 순서가 없는 정보를 정리할 때 좋은 수납상자. 고유의 이름을 부여한다.
	- 파이썬의 딕셔너리와 비슷하다.
	- 중괄호로 묶는다.
	- 접근시에는 '객체.가져올정보의이름(key, property)' 으로 접근한다.
	- roles.designer
- 배열: 정보를 순서대로 정리한다. 각각의 엘리먼트는 고유의 식별자인 index를 갖고 있다

## 객체

for (var 변수 in 객체이름)

Ex.

```

for(var name in roles){
  console.log('object =>', name);

```

### value에 접근할 때

- 객체이름.key
- 객체이름['key']

## 객체지향

- 데이터의 정리: 배열과 객체

### 함수


- 서로 연관된 코드를 다른 코드와 구분짓기 위해 함수를 만든다.
- 함수는 처리해야할 일에 대한 정보를 담고있는 일종의 구문이면서 동시에 값이다.
- 변수에 넣을 수 있다면 값이고 아니면 값이 아니라고 보면 쉽다.
- js에서는 함수가 값이 될수있다. 즉, 변수에 담아 확인할 수 있다.

```
console.log(이름);
을 통해 확인하거나

이름();
의 형태로 확인할 수 있다. 
```

- 함수는 연관된 데이터를 그룹핑하는 객체. 
- 배열의 원소로 함수가 존재할 수 있고, 객체에 들어갈 수 있다. 

## 객체와 함수

- this를 통해서 객체 스스로를 지정한다. 객체의 이름이 바뀌어도 안심!
- 객체 안에 함수를 넣어주는 것이 가능하다. 
- 객체는 값을 저장하는 그릇이다. 
- 연관된 데이터와 그를 처리하는 함수들을 한번에 묶어 함수의 복잡성을 낮춘다.. 
- 코드의 정리정돈을 통해 복잡성을 낮추는것이 기본 지식.

## refactoring

효율적으로 동작하도록 코드를 짜는 것

## 패키지 매니저

소프트웨어들을 생성하고, 설치하고 , 삭제하는 등 패키지를 관리해주는 프로그램.

컴퓨터 언어와 운영체제 별로 패키지 매니저는 매우중요하다.

노드에서 자주 사용하는 패키지 매니저는 npm이며 노드 설치시 자동으로 같이 설치된다. 

이를 통해 `pm2 패키지`를 설치해보자.

pm2와 같은 프로그램은, 현재 실행중인 프로그램을 관리해준다. 



__편리한 이유__

main.js를 수정하면 노드를 껐다 켜야했었는데, 프로그램을 자동으로 껐다켜주어 수고를 덜어준다.

### PM2

`pm2 start app.js`: 실행.

`pm2 monit`: 실행중인 JS 파일들 모니터링.

`pm2 list`: 실행중인 앱을 보여준다.

`pm2 stop app(main)`: 종료.



소스코드를 변경해도 알아서 껐다켜주기 때문에 매우 편리하는 점을 상기하자. 대신, 

`pm2 start app.js --watch` 명령어를 입력해줘야한다.



에러가 났을시 에러가 난 부분을 알고싶다면,

`pm2 log` 라고 입력하면 된다. 

## HTML Form

사용자가 서버쪽으로 데이터를 전송하기 위한 방식이다.

`textarea` 태그를 통해 폼을 크게 넓힐 수 있다.

input의 타입 속성을 `submit`으로 주면 된다. 

```html	
<form action = "http://localhost:3000/보내고자 하는 경로" method = "post">
    <p>
        <input type="text" name="title">
    </p>
    <p>
        <textarea name = "description"></textarea>
    </p>
    <p>
        <input type="submit"> <!--제출-->
    </p>
</form>
```

그냥 데이터를 전송하면 서버가 알지 못하므로, 이름을 부여하여 전송한다.

즉, 사용자가 작성한 폼 안에 있는 정보를 submit버튼을 눌렀을 때, 액션 속성이 가리키는 서버로 쿼리스트링의 형태로 정보를 전송하는 html의 기능이라는 것이다.



정보를 서버로 보낼때에는 url에 보이도록 하는 것이 아니라, 숨겨서 보내야한다. 은밀하게 서버로 보내야하므로 `form의 method속성`으로 `"post"` 방식을 선택하면 된다. 

## 모듈

객체가 많아지면 이를 또 정리할 수 있는 도구. 제일 큰 도구라고 할 수 있다. 

- require.exports = 객체이름; 이라는 약속된 구문을 통해서 모듈을 내보낸다.
- require('./mpart.js') 의 구문을 통해 모듈을 불러온다. 

## 보안

- 오염된 정보를 쳐내는 것이 filter
- path.parse('경로').base;
	- 경로탐색정보를 세탁하는 것.

### 오염된 정보가 나갈때

문제가 있는 부분은 자동으로 필터링한다. 

```
<와 > 의 경우 위험을 초래할 수 있다. 따라서

< 는 &lt;로 
> 는 &gt;로 표시한다.

```

- less than, greater than
- 소독이 필요한 경우 sanitize로 검색해보도록하자.  

### 47.2 출력정보에 대한 보안

1. 사용자가 입력한 정보를 웹으로 출력할 때 오염된 정보를 소독하는 것
2. npm을 통해 내가아닌 다른사람이 만든 모듈을 사용하여 웹 애플리케이션을 빠르게 만드는 법을 살펴본다.

## npm

__npm init__

- 애플리케이션을 npm으로 관리하기 위한 절차가 시작된다. 
- 자신의 애플리케이션을 패키지로 관리하는 것임
- -s => 우리가 진행하는 프로젝트에서 사용할 작은 조각의 프로그램으로써 설치
- dependencies: 다른 프로그램에게 의존한다. 

